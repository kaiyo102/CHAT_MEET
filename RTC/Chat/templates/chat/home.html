{% extends "chat/base.html" %}

{% block  title %}Chat room | {% endblock  %}
{%block content%}
    <div class="container">
        <div class="left-column container mt-0" style="max-width: 300px; flex-direction: column; height: 80vh;">
            <div class=""><h3>Chat</h3></div>
            {% if rooms %}
                {% for room in rooms %}
                    <div class="group-list">
                        {% for user in room.users.all %}
                            {% if user.username != request.user.username %}
                                <div class="d-flex" style="width: 100%; height: 70px; align-items: center; padding: 5px;">
                                    <img src="{{ user.profile_picture.url | default:'media/profile_pictures/default.jpg' }}" 
                                         alt="Profile Picture" 
                                         class="img-fluid rounded-circle" 
                                         style="width: 40px; height: 40px; object-fit: cover; margin-right: 15px;">
                                    <a href="{% url 'create_room' user.username %}" style="
                                        background-color: rgb(0, 48, 131);
                                        text-decoration: none;
                                        padding: 10px;
                                        color: white;
                                        text-align: center;
                                        border-radius: 5px; 
                                        font-weight: bold;
                                        display: flex;
                                        justify-content: center;
                                        align-items: center;
                                        height: 100%;
                                        width: calc(100% - 55px); /* Tính toán width cho link (dựa trên kích thước của ảnh và padding) */
                                    ">
                                        {{ user.username }}
                                    </a>
                                </div>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endfor %}
                
            {% else %}
            <div class="">Bạn chưa có bất kỳ cuộc trò chuyện nào!</div>
            {% endif %}
        </div>
        <div class="main-content container mt-0" style="max-width: 800px; display: flex; flex-direction: column; height: 80vh;">
            <div class="chat-container">
                <div class="chat-header">
                    
                </div>
            </div>
        </div>
        <div class="right-column container mt-0" style="max-width: 300px; flex-direction: column; height: 80vh;">
            <div class="chat-container">
                <div class="chat-header">
                    
                </div>
            </div>
        </div>
    </div>  
{%endblock%}